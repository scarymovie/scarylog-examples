# Примеры ScaryLog

Этот репозиторий содержит примеры, демонстрирующие использование библиотеки логирования `scarylog`, которая представляет собой обертку вокруг стандартного пакета `slog` в Go.

## Обзор

ScaryLog предоставляет удобную обертку вокруг структурированного логгера Go (`slog`) с дополнительными возможностями:

- Простой и удобный API
- Цветной вывод в консоль для лучшей читаемости
- Гибкая настройка через функциональные опции
- Атрибуты по умолчанию для последовательного контекста
- Интеграция с контекстом для распределенной трассировки

## Установка

```bash
go get github.com/scarymovie/scarylog
```

## Примеры

Этот репозиторий содержит несколько примеров использования библиотеки scarylog:

### Базовые примеры

Файл `main.go` содержит исчерпывающие базовые примеры использования библиотеки scarylog:

#### 1. Базовая инициализация и использование

```go
logger := scarylog.NewLogger()
logger.Info("Приложение запущено")
logger.Warn("Это предупреждающее сообщение")
logger.Error("Произошла ошибка", err)
```

#### 2. Настройка уровней логирования

```go
// Включить логирование на уровне отладки
debugLogger := scarylog.NewLogger(scarylog.WithLevel(slog.LevelDebug))
debugLogger.Debug("Это отладочное сообщение", "ключ", "значение")
```

#### 3. Интеграция с контекстом

```go
ctx := context.Background()
ctx = scarylog.ToContext(ctx, logger)
scarylog.FromContext(ctx).Info("Сообщение с использованием логгера из контекста")
```

#### 4. Структурированное логирование с полями

```go
logger.With("user_id", 123, "action", "login").Info("Пользователь вошел в систему")
logger.With("method", "GET", "url", "/api/users", "status", 200).Info("Запрос к API завершен")
```

#### 5. Группировка полей

```go
userLogger := logger.Group("user-service")
userLogger.With("user_id", 456).Info("Обработка запроса пользователя")
```

#### 6. Обработка ошибок

```go
err := fmt.Errorf("пример ошибки для демонстрации")
logger.Error("Произошла ошибка во время обработки", err)
```

#### 7. Атрибуты по умолчанию

```go
customLogger := scarylog.NewLogger(scarylog.WithDefaultAttrs(
    "service", "user-service",
    "version", "1.0.0"
))
customLogger.Info("Сообщение лога с пользовательскими атрибутами")
```

### Расширенные примеры

Более продвинутые примеры можно найти в каталоге `examples/`, включая:

- Шаблоны логирования, ориентированные на сервисы
- Реализации промежуточного программного обеспечения с контекстным логированием
- Различные форматы вывода
- Конфигурации на основе окружения

## Демонстрируемые возможности

- **Базовое логирование**: уровни Info, Warn, Error и Debug
- **Структурированное логирование**: пары ключ-значение для лучшего контекста
- **Интеграция с контекстом**: сохранение и извлечение логгеров из context.Context
- **Группы**: объединение связанных полей вместе
- **Обработка ошибок**: правильное логирование ошибок с трассировкой стека
- **Пользовательские атрибуты**: атрибуты по умолчанию для последовательного логирования
- **Операции с таймингом**: логирование продолжительности операций
- **Тестирование**: как тестировать код, использующий библиотеку логирования

## Запуск примеров

### Базовые примеры
```bash
go run main.go
```

### Расширенные примеры
```bash
cd examples/
go run advanced_example.go
```

### Запуск тестов
```bash
go test -v
```

Будут запущены все примеры, и результат будет показан в формате JSON (по умолчанию для scarylog, который использует slog).